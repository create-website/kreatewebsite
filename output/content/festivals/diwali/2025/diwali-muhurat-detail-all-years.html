<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diwali Muhurat Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/suncalc/1.8.0/suncalc.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Lora:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Festive Harmony -->
    <!-- Application Structure Plan: The application is designed as a single-page, top-down narrative to guide the user from general understanding to personalized action. It starts with a broad introduction to Diwali and the concept of 'Muhurat' (Why is this important?). It then flows into the main interactive feature: a location-based Lakshmi Puja Muhurat calculator (What is my specific timing?). This provides immediate personal value. Following the tool, a detailed explanation of the calculated timing (Pradosh Kaal) is provided to give context to the result. Finally, a visual timeline of general Diwali evening timings offers a broader perspective. This structure was chosen to educate the user first, then empower them with a personalized tool, and finally enrich their understanding, creating a complete and user-friendly experience. -->
    <!-- Visualization & Content Choices: Report Info: Importance of auspicious timing (Muhurat). -> Goal: Inform & Personalize. -> Viz/Presentation Method: Interactive card with a button-triggered calculation. -> Interaction: User clicks a button, browser requests location, and the app displays calculated, localized timings. -> Justification: This is the most effective way to make the abstract concept of 'Muhurat' tangible and personally relevant to the user. It moves beyond static information to a dynamic, useful tool. Report Info: General sequence of Diwali evening rituals. -> Goal: Organize & Inform. -> Viz/Presentation Method: A structured timeline using HTML divs and Tailwind CSS. -> Interaction: Static visual guide. -> Justification: A visual timeline is more intuitive for understanding a sequence of events than a text list or a data chart. It clearly segments the evening into its key phases. Library/Method: Vanilla JS for logic, SunCalc.js for astronomical calculations, and Tailwind CSS for styling. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FFF8F0;
        }
        .font-lora {
            font-family: 'Lora', serif;
        }
        .diya-flame {
            width: 16px;
            height: 24px;
            background-color: #FFC700;
            border-radius: 50% 50% 20% 20% / 60% 60% 40% 40%;
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            animation: flicker 1.5s infinite alternate;
            box-shadow: 0 0 10px #FFC700, 0 0 20px #FFC700, 0 0 30px #FF8C00;
        }
        .diya-base {
            width: 50px;
            height: 25px;
            background-color: #D2691E;
            border-radius: 0 0 50% 50%;
            position: relative;
        }
        @keyframes flicker {
            0%, 100% {
                transform: translateX(-50%) scaleY(1) scaleX(1);
                opacity: 1;
            }
            50% {
                transform: translateX(-50%) scaleY(0.95) scaleX(1.05);
                opacity: 0.8;
            }
        }
    </style>
</head>
<body class="text-gray-800">

    <header class="text-center py-8 bg-amber-50 border-b-4 border-amber-600">
        <div class="relative inline-block mx-auto mb-4">
            <div class="diya-base">
                <div class="diya-flame"></div>
            </div>
        </div>
        <h1 class="text-4xl md:text-5xl font-bold font-lora text-amber-900">Diwali Muhurat Guide</h1>
        <p class="mt-2 text-lg text-amber-800">Find the most auspicious time for your Lakshmi Puja</p>
    </header>

    <main class="max-w-4xl mx-auto p-4 md:p-8">

        <section id="intro" class="mb-12">
            <h2 class="text-3xl font-bold font-lora text-amber-800 mb-4 text-center">The Spiritual Significance of Timing</h2>
            <p class="text-lg text-justify leading-relaxed bg-white/50 p-6 rounded-lg shadow-sm">
                Diwali, the festival of lights, is a celebration of the victory of light over darkness and good over evil. At its heart is the Lakshmi Puja, a prayer to the Goddess of wealth and prosperity, Lakshmi. In Vedic traditions, performing rituals at an auspicious time, known as a 'Muhurat', is believed to amplify the positive energies and blessings received. A Muhurat is a sacred window of time, calculated based on planetary positions, when cosmic energies are most favorable for a specific activity. Performing Lakshmi Puja during the correct Muhurat is considered crucial for inviting prosperity, happiness, and success into one's home for the year ahead.
            </p>
        </section>

        <section id="calculator" class="mb-12">
             <h2 class="text-3xl font-bold font-lora text-amber-800 mb-6 text-center">Your Personal Lakshmi Puja Muhurat</h2>
            <div class="bg-gradient-to-br from-amber-500 to-red-500 p-6 md:p-8 rounded-xl shadow-lg text-white">
                 <div id="muhurat-display" class="text-center">
                    <p class="text-lg mb-4">Select a year, then click the button to find the auspicious Pradosh Kaal timings for Lakshmi Puja based on your location.</p>
                    <div class="flex justify-center items-center gap-4 mb-6">
                        <label for="year-select" class="font-bold">Year:</label>
                        <select id="year-select" class="bg-white/30 border border-white/50 text-white font-bold py-2 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-200">
                            <option value="2024">2024</option>
                            <option value="2025">2025</option>
                            <option value="2026">2026</option>
                            <option value="2027">2027</option>
                        </select>
                    </div>
                    <button id="find-muhurat-btn" class="bg-white text-amber-800 font-bold py-3 px-8 rounded-full hover:bg-amber-100 transition-all duration-300 transform hover:scale-105 shadow-md">
                        ðŸª” Calculate Muhurat
                    </button>
                    <div id="muhurat-result" class="hidden mt-6">
                        <p class="text-amber-100 text-sm">Auspicious timing for Diwali on <span id="diwali-date" class="font-bold"></span>:</p>
                        <div class="mt-4 bg-white/20 p-4 rounded-lg">
                            <h3 class="text-xl font-bold">Pradosh Kaal Muhurat</h3>
                            <p class="text-3xl md:text-4xl font-bold my-2" id="muhurat-time"></p>
                            <p class="text-amber-200">Based on your detected location.</p>
                        </div>
                    </div>
                    <div id="error-message" class="hidden mt-6 text-amber-100 bg-red-800/50 p-4 rounded-lg"></div>
                 </div>
            </div>
        </section>

        <section id="explanation" class="mb-12">
             <h2 class="text-3xl font-bold font-lora text-amber-800 mb-4 text-center">Understanding Pradosh Kaal</h2>
             <div class="bg-white/50 p-6 rounded-lg shadow-sm">
                <p class="text-lg leading-relaxed mb-4">
                    The Muhurat calculated above is for **Pradosh Kaal**. This is the period that begins right after sunset and is considered the most powerful and widely accepted time for performing Lakshmi Puja on Diwali.
                </p>
                <ul class="list-disc list-inside space-y-2 text-lg">
                    <li><strong>Divine Timing:</strong> It is believed that during Pradosh Kaal, the divine trinity of Brahma, Vishnu, and Maheshwara are in a benevolent mood, making prayers more effective.</li>
                    <li><strong>Stable Lagna:</strong> This period often coincides with 'Vrishabha Lagna' (Taurus Ascendant), which is a fixed sign. Performing puja during a fixed Lagna is thought to make wealth and prosperity 'stable' in the home.</li>
                    <li><strong>Welcoming Lakshmi:</strong> It is said that Goddess Lakshmi descends to Earth during this time to bless her devotees. Lighting lamps and keeping doors open during Pradosh Kaal is a symbolic gesture to welcome her.</li>
                </ul>
             </div>
        </section>
        
        <section id="timeline">
            <h2 class="text-3xl font-bold font-lora text-amber-800 mb-6 text-center">General Diwali Evening Timings</h2>
            <p class="text-center text-lg mb-6 max-w-2xl mx-auto">While your personal Muhurat is most important, the entire evening of Diwali holds significance. Here is a general timeline of the key periods.</p>
            <div class="w-full bg-white/50 p-6 rounded-lg shadow-sm">
                <div class="relative">
                    <div class="h-1 bg-amber-300 absolute top-1/2 left-0 right-0 transform -translate-y-1/2"></div>
                    <div class="flex justify-between items-center relative">
                        <div class="text-center w-1/3">
                            <div class="mx-auto h-4 w-4 bg-amber-600 rounded-full border-2 border-white shadow"></div>
                            <h3 class="mt-2 font-bold">Sunset</h3>
                            <p class="text-sm text-gray-600">Marks the beginning of Pradosh Kaal.</p>
                        </div>
                        <div class="text-center w-1/3">
                             <div class="mx-auto h-4 w-4 bg-red-700 rounded-full border-2 border-white shadow"></div>
                            <h3 class="mt-2 font-bold">Pradosh Kaal</h3>
                            <p class="text-sm text-gray-600">~90-120 minutes post-sunset. Prime time for Puja.</p>
                        </div>
                        <div class="text-center w-1/3">
                             <div class="mx-auto h-4 w-4 bg-amber-600 rounded-full border-2 border-white shadow"></div>
                            <h3 class="mt-2 font-bold">Mahanishita Kaal</h3>
                            <p class="text-sm text-gray-600">The midnight period, auspicious for Tantric pujas.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="text-center py-6 mt-12 bg-amber-50 border-t-2 border-amber-200">
        <p class="text-amber-800">Wishing you a very Happy and Prosperous Diwali! âœ¨</p>
    </footer>

    <script>
        const findMuhuratBtn = document.getElementById('find-muhurat-btn');
        const yearSelect = document.getElementById('year-select');
        const muhuratResult = document.getElementById('muhurat-result');
        const muhuratTime = document.getElementById('muhurat-time');
        const errorMessage = document.getElementById('error-message');
        const diwaliDateEl = document.getElementById('diwali-date');
        const initialText = document.querySelector('#muhurat-display p');
        const yearSelectorDiv = document.querySelector('#muhurat-display .flex');

        const diwaliDates = {
            2024: '2024-11-01',
            2025: '2025-10-21',
            2026: '2026-11-08',
            2027: '2027-10-29',
        };

        findMuhuratBtn.addEventListener('click', () => {
            initialText.style.display = 'none';
            yearSelectorDiv.style.display = 'none';
            findMuhuratBtn.textContent = 'Fetching Location...';
            findMuhuratBtn.disabled = true;

            if (!navigator.geolocation) {
                showError("Geolocation is not supported by your browser. Please use a different browser.");
                return;
            }

            navigator.geolocation.getCurrentPosition(success, error);
        });

        function success(position) {
            findMuhuratBtn.textContent = 'Calculating...';
            const latitude = position.coords.latitude;
            const longitude = position.coords.longitude;
            
            const selectedYear = yearSelect.value;
            const diwaliDateString = diwaliDates[selectedYear];

            if (!diwaliDateString) {
                showError(`Sorry, the date for Diwali in ${selectedYear} is not available in this tool.`);
                return;
            }
            
            calculateMuhurat(latitude, longitude, diwaliDateString);
        }

        function error(err) {
            let message = '';
            switch (err.code) {
                case err.PERMISSION_DENIED:
                    message = "You denied the request for Geolocation. Please allow location access to calculate your Muhurat.";
                    break;
                case err.POSITION_UNAVAILABLE:
                    message = "Location information is unavailable.";
                    break;
                case err.TIMEOUT:
                    message = "The request to get user location timed out.";
                    break;
                default:
                    message = "An unknown error occurred.";
                    break;
            }
            showError(message);
        }

        function calculateMuhurat(lat, lon, dateString) {
            // We add T12:00:00 to avoid timezone issues where the date might shift to the previous day.
            const diwaliDate = new Date(dateString + 'T12:00:00');
            const times = SunCalc.getTimes(diwaliDate, lat, lon);

            const sunsetTime = times.sunset;
            
            const pradoshKaalStart = sunsetTime;
            const pradoshKaalEnd = new Date(sunsetTime.getTime() + 96 * 60 * 1000); // Approximately 96 minutes

            displayResult(pradoshKaalStart, pradoshKaalEnd, diwaliDate);
        }

        function displayResult(start, end, date) {
            const options = { hour: '2-digit', minute: '2-digit', hour12: true };
            const dateOptions = { year: 'numeric', month: 'long', day: 'numeric' };

            muhuratTime.textContent = `${start.toLocaleTimeString([], options)} - ${end.toLocaleTimeString([], options)}`;
            diwaliDateEl.textContent = date.toLocaleDateString([], dateOptions);

            findMuhuratBtn.style.display = 'none';
            muhuratResult.classList.remove('hidden');
            errorMessage.classList.add('hidden');
        }

        function showError(message) {
            errorMessage.textContent = message;
            errorMessage.classList.remove('hidden');
            findMuhuratBtn.style.display = 'none';
            initialText.style.display = 'none';
            yearSelectorDiv.style.display = 'none';
        }

    </script>
</body>
</html>

