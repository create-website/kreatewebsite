<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A/B Testing Sample Size Infographic</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Brilliant Blues with warm accents (#ffa600, #ff7c43, #f95d6a) -->
    <!-- Narrative Plan: The infographic tells a story starting with the 'why' (most tests fail), explaining the 'what' (the 4 pillars), demonstrating the 'how' (interactive chart showing relationships), applying it with a 'walkthrough' (example flow), and summarizing the 'takeaways'. This narrative structure guides the user from problem to understanding, which is more effective for an infographic than a simple tool layout. -->
    <!-- Visualization Choices: 1. Big Stat: Goal=Inform, Viz=Large Text. 2. 4 Pillars: Goal=Inform, Viz=Donut Chart/Bar Chart/Pictographs (Chart.js & Unicode). Justification=Simple, quick communication of single concepts. NO SVG. 3. Balancing Act: Goal=Relationships, Viz=Interactive Line Chart (Chart.js). Justification=Best way to show the non-linear relationship between MDE and Sample Size. NO SVG. 4. Example Flow: Goal=Organize, Viz=HTML/CSS Flowchart. Justification=Clearly shows a process. NO SVG/Mermaid. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }
        .text-gradient {
            background: linear-gradient(90deg, #f95d6a, #d45087, #a05195, #665191);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .btn-toggle {
            transition: all 0.2s ease-in-out;
        }
        .btn-toggle-active {
            background-color: #665191;
            color: white;
            transform: scale(1.05);
        }
        .btn-toggle-inactive {
            background-color: #e2e8f0;
            color: #475569;
        }
        .flow-arrow {
            color: #a05195;
            font-size: 2rem;
            line-height: 1;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-700">

    <div class="container mx-auto px-4 py-12 md:px-8 md:py-20">

        <header class="text-center max-w-4xl mx-auto mb-20">
            <h1 class="text-4xl md:text-6xl font-extrabold text-slate-800 tracking-tight">Are Your A/B Tests Just Guesswork?</h1>
            <div class="mt-8 bg-white rounded-2xl shadow-lg p-6 md:p-8 border border-slate-200">
                <p class="text-7xl md:text-8xl font-extrabold text-gradient">8 out of 10</p>
                <p class="mt-4 text-xl md:text-2xl font-semibold text-slate-600">A/B tests fail to produce a statistically significant result.</p>
                <p class="mt-2 text-md text-slate-500">The most common reason? Choosing the wrong sample size.</p>
            </div>
        </header>

        <section class="mb-20">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-12 text-slate-800">The 4 Pillars of a Reliable Test</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                
                <div class="bg-white p-6 rounded-xl shadow-md border border-slate-200">
                    <h3 class="font-bold text-xl mb-3 text-slate-800">1. Baseline Rate</h3>
                    <p class="text-sm text-slate-500 mb-4">Your starting point. What is the current conversion rate of your original page (control)?</p>
                    <div class="h-40 w-full mx-auto"><canvas id="baselineChart"></canvas></div>
                    <p class="text-xs text-center mt-2 text-slate-400">Example: A 5% baseline conversion rate.</p>
                </div>

                <div class="bg-white p-6 rounded-xl shadow-md border border-slate-200">
                    <h3 class="font-bold text-xl mb-3 text-slate-800">2. Minimum Detectable Effect</h3>
                    <p class="text-sm text-slate-500 mb-4">The smallest improvement you care about detecting. A smaller MDE needs more users.</p>
                    <div class="h-40 w-full mx-auto"><canvas id="mdeChart"></canvas></div>
                    <p class="text-xs text-center mt-2 text-slate-400">Detecting a 5% lift is much harder than a 20% lift.</p>
                </div>

                <div class="bg-white p-6 rounded-xl shadow-md border border-slate-200">
                    <h3 class="font-bold text-xl mb-3 text-slate-800">3. Statistical Power</h3>
                    <p class="text-sm text-slate-500 mb-4">The probability of detecting a real effect and avoiding a false negative. Industry standard is 80%.</p>
                    <div class="h-40 flex items-center justify-center text-4xl text-slate-300">
                        <span class="text-[#ffa600]">✔</span><span class="text-[#ffa600]">✔</span><span class="text-[#ffa600]">✔</span><span class="text-[#ffa600]">✔</span><span class="text-[#ffa600]">✔</span><br/>
                        <span class="text-[#ffa600]">✔</span><span class="text-[#ffa600]">✔</span><span class="text-[#ffa600]">✔</span><span>✘</span><span>✘</span>
                    </div>
                     <p class="text-xs text-center mt-2 text-slate-400">80% Power: An 8 in 10 chance to find a true winner.</p>
                </div>
                
                <div class="bg-white p-6 rounded-xl shadow-md border border-slate-200">
                    <h3 class="font-bold text-xl mb-3 text-slate-800">4. Significance Level</h3>
                    <p class="text-sm text-slate-500 mb-4">Your confidence level. The probability of avoiding a false positive. Industry standard is 95%.</p>
                    <div class="h-40 flex items-center justify-center text-5xl font-bold">
                       <span class="text-[#665191]">95%</span>
                    </div>
                    <p class="text-xs text-center mt-2 text-slate-400">95% Confidence: Only a 5% chance of a false alarm.</p>
                </div>
            </div>
        </section>

        <section class="bg-white rounded-2xl shadow-lg p-6 md:p-10 mb-20 border border-slate-200">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-2 text-slate-800">The Sample Size Balancing Act</h2>
            <p class="text-center text-slate-500 mb-8 max-w-3xl mx-auto">This is the most important trade-off in A/B testing. Use the toggles to see how changing your baseline or power dramatically alters the sample size needed to detect different effects.</p>

            <div class="flex flex-wrap justify-center gap-4 mb-8">
                <div id="baseline-toggle" class="flex items-center bg-slate-100 rounded-full p-1">
                    <button data-value="0.02" class="btn-toggle btn-toggle-inactive px-4 py-2 text-sm font-semibold rounded-full">Low Baseline (2%)</button>
                    <button data-value="0.05" class="btn-toggle btn-toggle-active px-4 py-2 text-sm font-semibold rounded-full">Mid Baseline (5%)</button>
                    <button data-value="0.15" class="btn-toggle btn-toggle-inactive px-4 py-2 text-sm font-semibold rounded-full">High Baseline (15%)</button>
                </div>
                 <div id="power-toggle" class="flex items-center bg-slate-100 rounded-full p-1">
                    <button data-value="0.8" class="btn-toggle btn-toggle-active px-4 py-2 text-sm font-semibold rounded-full">80% Power</button>
                    <button data-value="0.9" class="btn-toggle btn-toggle-inactive px-4 py-2 text-sm font-semibold rounded-full">90% Power</button>
                </div>
            </div>

            <div class="chart-container">
                <canvas id="interactiveChart"></canvas>
            </div>
            <p class="text-center mt-6 font-semibold text-lg text-slate-600">Key Insight: Detecting smaller effects requires <span class="text-gradient">exponentially</span> larger sample sizes.</p>
        </section>

        <section class="mb-20">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-12 text-slate-800">A Practical Example: Step-by-Step</h2>
            <div class="flex flex-col md:flex-row items-center justify-center space-y-8 md:space-y-0 md:space-x-8 text-center">
                <div class="flex-1 max-w-xs">
                    <div class="bg-white p-6 rounded-xl shadow-md border border-slate-200">
                        <p class="text-5xl mb-2">1</p>
                        <h3 class="font-semibold text-lg text-slate-700">Know Your Baseline</h3>
                        <p class="text-sm text-slate-500">Our button currently has a 3% click-through rate.</p>
                    </div>
                </div>
                <div class="flow-arrow hidden md:block">→</div>
                <div class="flow-arrow block md:hidden transform rotate-90">↓</div>
                <div class="flex-1 max-w-xs">
                    <div class="bg-white p-6 rounded-xl shadow-md border border-slate-200">
                        <p class="text-5xl mb-2">2</p>
                        <h3 class="font-semibold text-lg text-slate-700">Set Your Goal (MDE)</h3>
                        <p class="text-sm text-slate-500">We want to detect at least a 10% relative improvement.</p>
                    </div>
                </div>
                <div class="flow-arrow hidden md:block">→</div>
                 <div class="flow-arrow block md:hidden transform rotate-90">↓</div>
                <div class="flex-1 max-w-xs">
                    <div class="bg-white p-6 rounded-xl shadow-md border border-slate-200">
                        <p class="text-5xl mb-2">3</p>
                        <h3 class="font-semibold text-lg text-slate-700">Choose Confidence</h3>
                        <p class="text-sm text-slate-500">We'll use the standard 95% significance & 80% power.</p>
                    </div>
                </div>
                <div class="flow-arrow hidden md:block">→</div>
                 <div class="flow-arrow block md:hidden transform rotate-90">↓</div>
                <div class="flex-1 max-w-xs">
                     <div class="bg-gradient-to-br from-[#d45087] to-[#f95d6a] p-6 rounded-xl shadow-lg text-white">
                        <p class="text-5xl mb-2">4</p>
                        <h3 class="font-semibold text-lg">Calculate Sample Size</h3>
                        <p class="text-sm">We need approx. 35,900 users per variation!</p>
                    </div>
                </div>
            </div>
        </section>

        <footer class="text-center pt-10 border-t border-slate-200">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-8 text-slate-800">Key Takeaways</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto">
                 <div class="bg-white p-6 rounded-xl shadow-md border border-slate-200">
                    <h3 class="font-bold text-xl mb-2 text-[#a05195]">Plan Before You Run</h3>
                    <p class="text-sm text-slate-500">Determine your required sample size *before* starting your test to avoid wasting time and traffic.</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-md border border-slate-200">
                    <h3 class="font-bold text-xl mb-2 text-[#d45087]">Small Effects = Big Samples</h3>
                    <p class="text-sm text-slate-500">Be realistic. Chasing tiny improvements requires massive traffic that most sites don't have.</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-md border border-slate-200">
                    <h3 class="font-bold text-xl mb-2 text-[#f95d6a]">Garbage In, Garbage Out</h3>
                    <p class="text-sm text-slate-500">An inaccurate baseline conversion rate will make your entire calculation meaningless. Measure it carefully!</p>
                </div>
            </div>
        </footer>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            const PALETTE = {
                blue: '#003f5c',
                purple: '#665191',
                pink: '#d45087',
                orange: '#ff7c43',
                yellow: '#ffa600'
            };

            const Z_SCORES = {
                power: { '0.8': 0.84, '0.9': 1.28 },
                alpha: { '0.05': 1.96 } 
            };
            
            let interactiveChartInstance = null;
            let interactiveState = {
                baseline: 0.05,
                power: 0.8,
                alpha: 0.05
            };

            function wrapLabel(label, maxWidth) {
                if (label.length <= maxWidth) {
                    return label;
                }
                const words = label.split(' ');
                const lines = [];
                let currentLine = '';
                words.forEach(word => {
                    if ((currentLine + word).length > maxWidth) {
                        lines.push(currentLine.trim());
                        currentLine = '';
                    }
                    currentLine += word + ' ';
                });
                lines.push(currentLine.trim());
                return lines;
            }

            const tooltipTitleCallback = (tooltipItems) => {
                const item = tooltipItems[0];
                let label = item.chart.data.labels[item.dataIndex];
                if (Array.isArray(label)) {
                    return label.join(' ');
                }
                return label;
            };
            
            new Chart(document.getElementById('baselineChart'), {
                type: 'doughnut',
                data: {
                    labels: ['Convert', 'Do Not Convert'],
                    datasets: [{
                        data: [5, 95],
                        backgroundColor: [PALETTE.purple, '#e2e8f0'],
                        borderColor: '#ffffff',
                        borderWidth: 4,
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    cutout: '70%',
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: { title: tooltipTitleCallback }
                        }
                    }
                }
            });

            new Chart(document.getElementById('mdeChart'), {
                type: 'bar',
                data: {
                    labels: ['Small Lift (5%)', 'Large Lift (20%)'],
                    datasets: [{
                        label: 'Difficulty to Detect',
                        data: [100, 25],
                        backgroundColor: [PALETTE.pink, PALETTE.orange],
                        borderRadius: 4
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true, maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: { title: tooltipTitleCallback }
                        }
                    },
                    scales: {
                        x: { display: false },
                        y: { grid: { display: false } }
                    }
                }
            });

            function calculateSampleSize(p1, power, alpha, mde) {
                const p2 = p1 * (1 + mde);
                if (p2 > 1) return Infinity; 

                const zBeta = Z_SCORES.power[power.toString()];
                const zAlpha = Z_SCORES.alpha[alpha.toString()];

                const part1 = p1 * (1 - p1);
                const part2 = p2 * (1 - p2);
                const term1 = Math.sqrt((part1 + part2) / 2);
                const term2 = Math.sqrt(part1);

                const numerator = Math.pow(zAlpha * term1 + zBeta * term2, 2);
                const denominator = Math.pow(p2 - p1, 2);
                
                if (denominator === 0) return Infinity;

                return Math.ceil(numerator / denominator);
            }

            function updateInteractiveChart() {
                const mdeValues = Array.from({ length: 19 }, (_, i) => 0.02 + i * 0.01); 
                const sampleSizes = mdeValues.map(mde => calculateSampleSize(interactiveState.baseline, interactiveState.power, interactiveState.alpha, mde));
                
                const ctx = document.getElementById('interactiveChart').getContext('2d');
                if (interactiveChartInstance) {
                    interactiveChartInstance.destroy();
                }

                interactiveChartInstance = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: mdeValues.map(mde => `${(mde * 100).toFixed(0)}%`),
                        datasets: [{
                            label: 'Sample Size Per Variation',
                            data: sampleSizes,
                            borderColor: PALETTE.purple,
                            backgroundColor: 'rgba(102, 81, 145, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4,
                            pointRadius: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false },
                             tooltip: {
                                mode: 'index',
                                intersect: false,
                                callbacks: {
                                    title: tooltipTitleCallback,
                                    label: (context) => `Sample Size: ${context.parsed.y.toLocaleString()}`
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: { display: true, text: 'Required Sample Size (per Variation)' },
                                ticks: {
                                    callback: (value) => value > 1000 ? `${value / 1000}k` : value
                                }
                            },
                            x: {
                                title: { display: true, text: 'Minimum Detectable Effect (MDE)' }
                            }
                        }
                    }
                });
            }

            function setupToggle(containerId, stateKey) {
                const container = document.getElementById(containerId);
                container.addEventListener('click', (e) => {
                    if (e.target.tagName === 'BUTTON') {
                        Array.from(container.children).forEach(btn => {
                            btn.classList.remove('btn-toggle-active');
                            btn.classList.add('btn-toggle-inactive');
                        });
                        e.target.classList.add('btn-toggle-active');
                        e.target.classList.remove('btn-toggle-inactive');
                        interactiveState[stateKey] = parseFloat(e.target.dataset.value);
                        updateInteractiveChart();
                    }
                });
            }

            setupToggle('baseline-toggle', 'baseline');
            setupToggle('power-toggle', 'power');

            updateInteractiveChart();
        });
    </script>

</body>
</html>
