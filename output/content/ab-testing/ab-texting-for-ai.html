<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Guide to A/B Testing for Conversational AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: "Warm Neutral Harmony" -->
    <!-- Application Structure Plan: The SPA is designed as a thematic, single-page dashboard with a sticky top navigation for easy access to key areas: 'Foundations', 'Methods', 'Metrics Explorer', 'Challenges & Ethics', and 'The Future'. This non-linear structure replaces the dense, multi-part report format, allowing users to explore topics based on interest. Key interactions include a clickable process diagram, a comparative view of testing methods, and a fully interactive 'Metrics Explorer' with a dynamic Chart.js chart and a filterable table. This structure was chosen to transform the static report into an engaging, self-guided learning tool, prioritizing user exploration and understanding over a passive reading experience. -->
    <!-- Visualization & Content Choices: 
        - Report Info: A/B Test Workflow -> Goal: Organize/Inform -> Viz: Interactive HTML/CSS Flowchart -> Interaction: Click to reveal details -> Justification: Breaks down a complex process into digestible, interactive steps.
        - Report Info: Comparison of A/B, MVT, MAB -> Goal: Compare -> Viz: Side-by-side content cards -> Interaction: Hover effects and clear text -> Justification: Allows for easy comparison of complex methodologies.
        - Report Info: 3 categories of metrics -> Goal: Inform/Compare -> Viz: Chart.js Bar Chart & HTML Table -> Interaction: Dropdown to update chart, buttons to filter table -> Justification: Provides a dynamic dashboard to explore and compare the impact of different KPIs, making abstract data tangible.
        - Report Info: Statistical/Psychological Challenges & Ethics -> Goal: Organize/Inform -> Viz: Accordion component -> Interaction: Click to expand/collapse -> Justification: Organizes complex information neatly, preventing user from being overwhelmed.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body { font-family: 'Inter', sans-serif; scroll-behavior: smooth; }
        .nav-link { transition: color 0.3s, border-bottom-color 0.3s; }
        .nav-link.active { color: #3b82f6; border-bottom-color: #3b82f6; }
        .section-hidden { display: none; }
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.5s ease-out; }
        .chart-container { position: relative; width: 100%; max-width: 800px; margin-left: auto; margin-right: auto; height: 350px; max-height: 400px; }
        @media (min-width: 768px) { .chart-container { height: 400px; } }
    </style>
</head>
<body class="bg-[#F8F7F4] text-[#2c3e50]">

    <header class="bg-white/80 backdrop-blur-lg shadow-sm sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-xl md:text-2xl font-bold text-gray-800">A/B Testing for AI</h1>
            <div class="hidden md:flex items-center space-x-6">
                <a href="#foundations" class="nav-link text-gray-600 hover:text-blue-500 pb-1 border-b-2 border-transparent">Foundations</a>
                <a href="#methods" class="nav-link text-gray-600 hover:text-blue-500 pb-1 border-b-2 border-transparent">Methods</a>
                <a href="#metrics" class="nav-link text-gray-600 hover:text-blue-500 pb-1 border-b-2 border-transparent">Metrics Explorer</a>
                <a href="#challenges" class="nav-link text-gray-600 hover:text-blue-500 pb-1 border-b-2 border-transparent">Challenges & Ethics</a>
                <a href="#future" class="nav-link text-gray-600 hover:text-blue-500 pb-1 border-b-2 border-transparent">The Future</a>
            </div>
            <button id="mobile-menu-button" class="md:hidden focus:outline-none">
                <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
        </nav>
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4 flex flex-col space-y-3">
             <a href="#foundations" class="nav-link text-gray-600 hover:text-blue-500">Foundations</a>
             <a href="#methods" class="nav-link text-gray-600 hover:text-blue-500">Methods</a>
             <a href="#metrics" class="nav-link text-gray-600 hover:text-blue-500">Metrics Explorer</a>
             <a href="#challenges" class="nav-link text-gray-600 hover:text-blue-500">Challenges & Ethics</a>
             <a href="#future" class="nav-link text-gray-600 hover:text-blue-500">The Future</a>
        </div>
    </header>

    <main class="container mx-auto p-6 md:p-8">
        
        <section id="foundations" class="pt-16 -mt-16 min-h-screen flex flex-col justify-center">
            <h2 class="text-4xl font-bold text-center mb-4 text-gray-800">Optimizing Conversational AI with Data</h2>
            <p class="text-lg text-center max-w-3xl mx-auto text-gray-600 mb-12">
                This guide explores the strategic frameworks for A/B testing chatbots and AI assistants. In this first section, we introduce the fundamental principles, from the definition of A/B testing in the context of AI to the structured workflow that ensures reliable, data-driven decisions. Understanding these foundations is the first step toward continuous improvement and unlocking the full potential of your conversational platforms.
            </p>
            <div class="grid md:grid-cols-2 gap-8 items-center">
                <div class="bg-white p-8 rounded-xl shadow-lg border border-gray-200">
                    <h3 class="text-2xl font-bold mb-4">The Evolution of A/B Testing</h3>
                    <p class="text-gray-700">
                        A/B testing is a controlled experiment to compare two versions of a product. For early, rule-based chatbots, this meant optimizing simple variables like button colors. However, with the rise of powerful Large Language Models (LLMs), testing has evolved. It's no longer just about improving performance; it's a critical tool for risk management. A/B tests now validate that an AI assistant does not produce harmful, biased, or brand-damaging content, making it a strategic imperative for corporate governance.
                    </p>
                </div>
                <div class="bg-white p-8 rounded-xl shadow-lg border border-gray-200">
                    <h3 class="text-2xl font-bold mb-4">Anatomy of an A/B Test</h3>
                    <p class="text-gray-700 mb-4">A successful test follows a structured workflow. Click each step below to learn more about the process.</p>
                    <div id="workflow-diagram" class="space-y-2">
                    </div>
                </div>
            </div>
        </section>

        <section id="methods" class="pt-24 -mt-16 min-h-screen flex flex-col justify-center">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-4 text-gray-800">Advanced Testing Methodologies</h2>
            <p class="text-lg text-center max-w-3xl mx-auto text-gray-600 mb-12">
                While a standard A/B test is powerful, a mature experimentation program utilizes a variety of methods. This section introduces advanced paradigms like A/B/n, Multivariate, and AI-driven testing. Understanding the trade-offs between them—prioritizing deep statistical 'learning' versus immediate business 'earning'—is key to choosing the right tool for your strategic goals.
            </p>
            <div id="methods-container" class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
            </div>
        </section>

        <section id="metrics" class="pt-24 -mt-16 min-h-screen">
             <h2 class="text-3xl md:text-4xl font-bold text-center mb-4 text-gray-800">The Metrics Explorer</h2>
             <p class="text-lg text-center max-w-3xl mx-auto text-gray-600 mb-12">
                Effective measurement is the heart of optimization. This interactive dashboard allows you to explore the comprehensive framework of metrics used to evaluate conversational AI. Select a Key Performance Indicator (KPI) to see a hypothetical A/B test result, or use the filters to browse metrics across User Experience, Task Performance, and Business ROI to understand how they connect to strategic goals.
             </p>

            <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg border border-gray-200">
                <div class="flex flex-col md:flex-row justify-between md:items-center mb-6">
                    <h3 class="text-2xl font-bold mb-4 md:mb-0">A/B Test Performance Visualizer</h3>
                     <div class="flex items-center space-x-2">
                        <label for="metric-selector" class="font-semibold text-gray-700">Select Metric:</label>
                        <select id="metric-selector" class="p-2 border rounded-md bg-gray-50 focus:ring-2 focus:ring-blue-500">
                        </select>
                    </div>
                </div>
                <div class="chart-container mb-12">
                    <canvas id="metricsChart"></canvas>
                </div>

                <h3 class="text-2xl font-bold mb-4">Detailed Metrics Table</h3>
                <div id="metric-filters" class="flex flex-wrap gap-2 mb-4">
                     <button class="metric-filter-btn active bg-blue-500 text-white px-4 py-2 rounded-full text-sm font-semibold" data-filter="all">All Categories</button>
                     <button class="metric-filter-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-full text-sm font-semibold" data-filter="User Engagement & Experience">User Experience</button>
                     <button class="metric-filter-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-full text-sm font-semibold" data-filter="Task-Oriented & Performance">Task Performance</button>
                     <button class="metric-filter-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-full text-sm font-semibold" data-filter="Business Impact & ROI">Business ROI</button>
                </div>
                <div class="overflow-x-auto">
                    <table class="w-full text-left border-collapse">
                        <thead class="bg-gray-100">
                            <tr>
                                <th class="p-3 font-semibold text-sm text-gray-600 border-b">Metric</th>
                                <th class="p-3 font-semibold text-sm text-gray-600 border-b">Definition</th>
                                <th class="p-3 font-semibold text-sm text-gray-600 border-b">Example KPI</th>
                            </tr>
                        </thead>
                        <tbody id="metrics-table-body">
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <section id="challenges" class="pt-24 -mt-16 min-h-screen flex flex-col justify-center">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-4 text-gray-800">Challenges & Ethical Frontiers</h2>
            <p class="text-lg text-center max-w-3xl mx-auto text-gray-600 mb-12">
                Effective A/B testing requires navigating complex statistical and psychological challenges. Furthermore, as AI becomes more integrated into our lives, testing carries significant ethical weight. This section covers common pitfalls like the "novelty effect" and explores the critical principles of fairness, transparency, and accountability needed to build user trust and ensure responsible innovation.
            </p>
            <div class="grid lg:grid-cols-2 gap-10">
                <div>
                    <h3 class="text-2xl font-semibold mb-4 text-center lg:text-left">Statistical & Psychological Traps</h3>
                    <div id="challenges-accordion" class="space-y-3"></div>
                </div>
                 <div>
                    <h3 class="text-2xl font-semibold mb-4 text-center lg:text-left">Ethical Principles in AI Testing</h3>
                    <div id="ethics-accordion" class="space-y-3"></div>
                </div>
            </div>
        </section>

        <section id="future" class="pt-24 -mt-16 min-h-screen flex flex-col justify-center">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-4 text-gray-800">The Future of AI Evaluation</h2>
            <p class="text-lg text-center max-w-3xl mx-auto text-gray-600 mb-12">
                The field of conversational AI is evolving rapidly, demanding that our methods for evaluation evolve as well. This final section looks ahead at the new frontiers of testing. We explore how to test next-generation Large Language Models (LLMs), the complementary role of Reinforcement Learning from Human Feedback (RLHF) in training better models, and the emerging complexities of testing multimodal and voice assistants.
            </p>
             <div id="future-container" class="grid md:grid-cols-1 lg:grid-cols-3 gap-8">
            </div>
        </section>

    </main>

<!--

    <footer class="bg-gray-800 text-white mt-16">
        <div class="container mx-auto p-6 text-center text-gray-400">
            <p>Interactive guide created from the "Strategic Frameworks for the A/B Testing and Optimization of Conversational AI" report.</p>
            <p class="text-sm mt-2">&copy; 2025 AI Insights Corp. All Rights Reserved.</p>
        </div>
    </footer>
-->

    <script>
    document.addEventListener('DOMContentLoaded', function () {
        
        const appData = {
            workflow: [
                { title: '1. Set Clear Goals and Hypotheses', content: 'The process begins with a specific, measurable goal (e.g., "increase lead generation by 10%"). Based on an analysis of the existing chatbot funnel, a testable hypothesis is formulated (e.g., "Changing the welcome message to a proactive question will increase engagement").' },
                { title: '2. Isolate a Single Variable', content: 'A core principle is to modify only one element at a time. Whether it’s the conversational flow, a design element, or the bot’s tone, isolating the change ensures that any observed difference in performance can be attributed to that specific modification.' },
                { title: '3. Create Variations', content: 'At least two versions are created. Version A, the "control," is the existing version. Version B, the "treatment," incorporates the single change being tested. Sometimes multiple treatments (C, D, etc.) are used in an A/B/n test.' },
                { title: '4. Distribute Traffic', content: 'Users are randomly assigned to interact with either the control or one of the treatment variations. This randomization is critical to minimize bias and ensure the test groups are comparable and representative of the overall target audience.' },
                { title: '5. Run Test & Collect Data', content: 'The test must run long enough to collect a large enough sample size for results to be statistically significant. During this phase, data on all predefined metrics is meticulously collected for each variation.' },
                { title: '6. Analyze and Implement', content: 'After the test concludes, the data is analyzed. If a winning variation is identified with high statistical confidence, that change is implemented for all users. The insights then inform the hypotheses for the next test cycle.' }
            ],
            methods: [
                { title: 'A/B Testing', content: 'Compares two versions (A and B) of a single variable. The classic approach, best for gaining deep, statistically robust insights. Prioritizes LEARNING.', icon: '↔️' },
                { title: 'A/B/n Testing', content: 'Compares multiple versions (A, B, C...) against a control. Useful for testing several distinct ideas at once, but requires more traffic.', icon: '🔀' },
                { title: 'Multivariate Testing (MVT)', content: 'Tests multiple variables and their combinations simultaneously to find the best-performing mix. Identifies interaction effects but demands very high traffic.', icon: '🧩' },
                { title: 'Multi-Armed Bandit (MAB)', content: 'An AI-driven method that dynamically allocates more traffic to the better-performing variation in real-time. Maximizes conversions during the test. Prioritizes EARNING.', icon: '🤖' }
            ],
            metrics: [
                 { category: 'User Engagement & Experience', name: 'User Satisfaction (CSAT)', definition: 'A measure of user happiness with the interaction, typically from a post-chat survey.', kpi: 'Increase average satisfaction rating from 4.2 to 4.5 stars.' , valueA: 4.2, valueB: 4.5 },
                { category: 'User Engagement & Experience', name: 'Retention Rate', definition: 'The percentage of users who return to the chatbot within a given timeframe.', kpi: 'Improve 7-day user retention by 5%.', valueA: 20, valueB: 25 },
                { category: 'User Engagement & Experience', name: 'Session Duration', definition: 'The average length of a conversation in time or number of turns.', kpi: 'Increase average conversation length from 4 to 6 turns.', valueA: 4, valueB: 6 },
                { category: 'User Engagement & Experience', name: 'Bounce Rate', definition: 'The percentage of users who leave after the first bot message.', kpi: 'Decrease bounce rate on the welcome message from 40% to 30%.', valueA: 40, valueB: 30 },
                { category: 'Task-Oriented & Performance', name: 'Goal Completion Rate (GCR)', definition: 'The percentage of interactions where the user\'s primary goal is successfully met.', kpi: 'Increase the GCR for "check order status" from 80% to 90%.', valueA: 80, valueB: 90 },
                { category: 'Task-Oriented & Performance', name: 'Self-Service Rate', definition: 'The percentage of queries handled by the bot without human intervention.', kpi: 'Increase self-service rate by 10%.', valueA: 65, valueB: 75 },
                { category: 'Task-Oriented & Performance', name: 'Fallback Rate (FBR)', definition: 'The frequency with which the bot fails to understand the user\'s input.', kpi: 'Reduce the fallback rate from 15% to below 10%.', valueA: 15, valueB: 9 },
                { category: 'Task-Oriented & Performance', name: 'Response Time (ms)', definition: 'The average time it takes for the bot to respond to a user message.', kpi: 'Decrease average response time from 800ms to 500ms.', valueA: 800, valueB: 500 },
                { category: 'Business Impact & ROI', name: 'Conversion Rate', definition: 'The percentage of users who complete a desired business action (e.g., purchase).', kpi: 'Increase the conversion rate for users who interact with the bot by 2%.', valueA: 4.5, valueB: 6.5 },
                { category: 'Business Impact & ROI', name: 'Cost per Automated Conversation', definition: 'The total cost of the chatbot divided by the number of successfully automated conversations.', kpi: 'Reduce the cost per automated conversation by 15%.', valueA: 1.20, valueB: 1.02 },
                { category: 'Business Impact & ROI', name: 'Lead Generation', definition: 'The number of qualified leads captured by the chatbot per week.', kpi: 'Increase the number of qualified leads generated per week by 20%.', valueA: 50, valueB: 60 },
                { category: 'Business Impact & ROI', name: 'First Contact Resolution (FCR)', definition: 'The rate at which the bot resolves an issue on the first attempt.', kpi: 'Improve FCR by 8% for common technical support questions.', valueA: 72, valueB: 80 }
            ],
            challenges: [
                { title: 'The "Peeking" Problem', content: 'Constantly checking test results before they are statistically significant. Early results are volatile, and making decisions based on them can lead to implementing changes with no real effect.'},
                { title: 'Insufficient Sample Size', content: 'Running tests on too little traffic or for too short a duration. This leads to unreliable results that don\'t represent the broader user population.'},
                { title: 'Novelty Effect', content: 'Users are often attracted to new features simply because they are new, causing a temporary spike in engagement. This can be mistaken for a sustainable improvement.'},
                { title: 'Multiple Comparisons Problem', content: 'The risk of a false positive increases with every metric you track or variation you test. Statistical corrections are needed to maintain integrity.'}
            ],
            ethics: [
                { title: 'Fairness', content: 'A feature might improve overall metrics but perform poorly or cause harm for a specific demographic group. Mitigation involves auditing models for bias and segmenting test results by user group.'},
                { title: 'Transparency', content: 'Users have a right to know they are interacting with an AI and that their data may be used for experiments. Mitigation involves clear disclosure and providing opt-out mechanisms.'},
                { title: 'Accountability', content: 'When an AI makes a harmful error, there must be clear lines of responsibility. Mitigation requires comprehensive documentation of models, data, and test parameters to enable auditing.'},
                { title: 'User Well-being', content: 'Optimizing for engagement metrics like "session duration" could inadvertently foster unhealthy emotional dependence. Mitigation requires monitoring for potential harm, not just performance.'}
            ],
            future: [
                { title: 'Testing Large Language Models (LLMs)', content: 'Testing evolves from simple UI changes to comparing different foundational models (e.g., GPT-4 vs. Claude 3), experimenting with prompt engineering, and adjusting parameters like "temperature" to control creativity.', icon: '🧠'},
                { title: 'Reinforcement Learning from Human Feedback (RLHF)', content: 'RLHF is a training method, not a test. A/B testing identifies *what* users prefer, and RLHF is used to *teach* the model *how* to generate more of the preferred content, creating a powerful feedback loop for continuous improvement.', icon: '👍'},
                { title: 'Multimodal & Voice Testing', content: 'The next frontier involves testing systems that understand text, images, and audio. This adds complexity, requiring evaluation of not just each modality, but how well they work together, accounting for real-world noise and variable input quality.', icon: '🗣️'}
            ]
        };

        const workflowDiagram = document.getElementById('workflow-diagram');
        appData.workflow.forEach(item => {
            const el = document.createElement('div');
            el.innerHTML = `
                <button class="w-full text-left p-4 bg-gray-100 hover:bg-gray-200 rounded-lg font-semibold transition accordion-trigger">${item.title}</button>
                <div class="accordion-content px-4">
                    <p class="pt-2 pb-3 text-gray-600">${item.content}</p>
                </div>
            `;
            workflowDiagram.appendChild(el);
        });
        
        const methodsContainer = document.getElementById('methods-container');
        appData.methods.forEach(item => {
            const el = document.createElement('div');
            el.className = 'bg-white p-6 rounded-xl shadow-lg border border-gray-200 text-center flex flex-col items-center';
            el.innerHTML = `
                <div class="text-4xl mb-4">${item.icon}</div>
                <h3 class="text-xl font-bold mb-2">${item.title}</h3>
                <p class="text-gray-600 flex-grow">${item.content}</p>
            `;
            methodsContainer.appendChild(el);
        });

        const futureContainer = document.getElementById('future-container');
        appData.future.forEach(item => {
            const el = document.createElement('div');
            el.className = 'bg-white p-8 rounded-xl shadow-lg border border-gray-200 flex flex-col items-center text-center h-full';
            el.innerHTML = `
                <div class="text-5xl mb-4">${item.icon}</div>
                <h3 class="text-2xl font-bold mb-3">${item.title}</h3>
                <p class="text-gray-600 flex-grow">${item.content}</p>
            `;
            futureContainer.appendChild(el);
        });

        function createAccordion(containerId, data) {
            const container = document.getElementById(containerId);
            data.forEach(item => {
                const el = document.createElement('div');
                el.innerHTML = `
                    <button class="w-full text-left p-4 flex justify-between items-center bg-white hover:bg-gray-50 rounded-lg font-semibold transition accordion-trigger border shadow-sm">
                        <span>${item.title}</span>
                        <span class="transform transition-transform duration-300 text-blue-500 text-xl">+</span>
                    </button>
                    <div class="accordion-content px-4">
                        <p class="pt-2 pb-3 text-gray-600">${item.content}</p>
                    </div>
                `;
                container.appendChild(el);
            });
        }
        createAccordion('challenges-accordion', appData.challenges);
        createAccordion('ethics-accordion', appData.ethics);

        document.querySelectorAll('.accordion-trigger').forEach(button => {
            button.addEventListener('click', () => {
                const content = button.nextElementSibling;
                const icon = button.querySelector('span:last-child');
                button.parentElement.parentElement.querySelectorAll('.accordion-content').forEach(c => {
                    if (c !== content) {
                        c.style.maxHeight = null;
                        c.previousElementSibling.querySelector('span:last-child').textContent = '+';
                        c.previousElementSibling.querySelector('span:last-child').classList.remove('rotate-45');

                    }
                });

                if (content.style.maxHeight) {
                    content.style.maxHeight = null;
                    icon.textContent = '+';
                    icon.classList.remove('rotate-45');
                } else {
                    content.style.maxHeight = content.scrollHeight + "px";
                    icon.textContent = '+';
                    icon.classList.add('rotate-45');
                }
            });
        });

        const metricSelector = document.getElementById('metric-selector');
        const metricsTableBody = document.getElementById('metrics-table-body');
        const metricFilterBtns = document.querySelectorAll('.metric-filter-btn');
        let metricsChart;

        function populateMetricsTable(filter = 'all') {
            metricsTableBody.innerHTML = '';
            const filteredMetrics = filter === 'all' ? appData.metrics : appData.metrics.filter(m => m.category === filter);
            
            filteredMetrics.forEach(metric => {
                const row = document.createElement('tr');
                row.className = 'border-b hover:bg-gray-50';
                row.innerHTML = `
                    <td class="p-3 font-medium text-gray-800">${metric.name}</td>
                    <td class="p-3 text-gray-600">${metric.definition}</td>
                    <td class="p-3 text-gray-600">${metric.kpi}</td>
                `;
                metricsTableBody.appendChild(row);
            });
        }

        function initializeChart() {
            const ctx = document.getElementById('metricsChart').getContext('2d');
            appData.metrics.forEach(metric => {
                const option = document.createElement('option');
                option.value = metric.name;
                option.textContent = metric.name;
                metricSelector.appendChild(option);
            });

            const initialMetric = appData.metrics[0];
            metricsChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Control (A)', 'Variant (B)'],
                    datasets: [{
                        label: initialMetric.name,
                        data: [initialMetric.valueA, initialMetric.valueB],
                        backgroundColor: ['rgba(255, 159, 64, 0.7)', 'rgba(75, 192, 192, 0.7)'],
                        borderColor: ['rgb(255, 159, 64)', 'rgb(75, 192, 192)'],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: true, grid: { color: '#e5e7eb' } }
                    },
                    plugins: {
                        legend: { position: 'top' },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) { label += ': '; }
                                    if (context.parsed.y !== null) { label += context.parsed.y; }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });
        }

        function updateChart(metricName) {
            const metricData = appData.metrics.find(m => m.name === metricName);
            if (metricData) {
                metricsChart.data.datasets[0].label = metricData.name;
                metricsChart.data.datasets[0].data = [metricData.valueA, metricData.valueB];
                metricsChart.update();
            }
        }
        
        metricSelector.addEventListener('change', (e) => updateChart(e.target.value));

        metricFilterBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                metricFilterBtns.forEach(b => {
                    b.classList.remove('active', 'bg-blue-500', 'text-white');
                    b.classList.add('bg-gray-200', 'text-gray-700');
                });
                btn.classList.add('active', 'bg-blue-500', 'text-white');
                btn.classList.remove('bg-gray-200', 'text-gray-700');
                populateMetricsTable(btn.dataset.filter);
            });
        });

        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        const navLinks = document.querySelectorAll('.nav-link');
        const sections = document.querySelectorAll('section');
        
        window.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (pageYOffset >= sectionTop - 120) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${current}`) {
                    link.classList.add('active');
                }
            });
        });
        
        navLinks.forEach(link => {
            link.addEventListener('click', () => {
                if (mobileMenu.classList.contains('hidden') === false) {
                     mobileMenu.classList.add('hidden');
                }
            });
        });
        
        initializeChart();
        populateMetricsTable();
    });
    </script>
</body>
</html>
